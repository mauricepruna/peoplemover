{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "AlertsController",
        "requires": [
            "Ext.MessageBox"
        ],
        "views": [
            "TrolleyAlerts"
        ]
    },
    "name": "MyController1",
    "designerId": "a2bd6fb7-2a81-4a6c-a9b1-f64591afb834",
    "cn": [
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "launch",
                "implHandler": [
                    "",
                    "",
                    "",
                    "/* var form = button.up('formpanel'),",
                    "                        values = form.getValues(),\t\t\t\t// Form values",
                    "                        mainView = this.getMainView();",
                    "*/",
                    "",
                    "                // Success",
                    "                                var successCallback = function(resp, ops) {",
                    "",
                    "",
                    "                                     var alertfield = Ext.getCmp('alertfield');",
                    "",
                    "",
                    "                                    var jsonResp = Ext.JSON.decode(resp.responseText);",
                    "                                       //Ext.Msg.alert(\"Info\",\"message:\"+jsonResp.message);",
                    "                                    var alert = jsonResp.message;",
                    "                                    alertfield.setValue(jsonResp.message);",
                    "",
                    "                                    if(alert!==\"Not Defined Alert\")",
                    "                                        {",
                    "                           var alertbutton = Ext.getCmp('myTabPanel').getTabBar().getComponent(3);",
                    "                                                //Ext.getCmp('btrolleyalerts');",
                    "                                                //Ext.create('widget.mainview').down('#btrolleyalerts');",
                    "                                            alertbutton.setBadgeText(\"New\");",
                    "",
                    "                                        }",
                    "",
                    "//                                     //get back",
                    "//                                          mainView.pop();",
                    "",
                    "//                                 //     // Hide login panel",
                    "//                                      form.hide();",
                    "",
                    "",
                    "                                };",
                    "",
                    "                                // Failure",
                    "                                var failureCallback = function(resp, ops) {",
                    "",
                    "                                   var jsonResp = Ext.JSON.decode(resp.responseText);",
                    "                                              Ext.Msg.alert(\"Info\",\"Not Defined Alert\");",
                    "",
                    "",
                    "",
                    "                                };",
                    "                                //TODO: Registration using server-side authentication service",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "                                                    Ext.Ajax.request({",
                    "                                                        url: \"http://pm-dev.cs.fiu.edu:8080/ppmws/alert\",",
                    "                                                        /*url: \"http://192.168.0.101/sendemail\",*/",
                    "                                                        method: 'POST',",
                    "                                                        /*headers: { 'Content-Type': 'application/json' },*/",
                    "                                                        /*params: callparams,*/",
                    "                                                        success: successCallback,",
                    "                                                        failure: failureCallback",
                    "                                                    });"
                ]
            },
            "name": "launch",
            "designerId": "e94b02b6-d381-4d1c-9dc9-01ccd3fcf581"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "trolleyalerts #bAlert",
                "designer|targetType": "Ext.Button",
                "fn": "onButtonTap",
                "implHandler": [
                    "                                  // Success",
                    "",
                    "                                        var successCallback = function(resp, ops) {",
                    "",
                    "",
                    "                                             var modifyalertfield = Ext.getCmp('alertfield');",
                    "",
                    "",
                    "                                            var jsonResp = Ext.JSON.decode(resp.responseText);",
                    "                                               //Ext.Msg.alert(\"Info\",\"message:\"+jsonResp.message);",
                    "                                            modifyalertfield.setValue(jsonResp.message);",
                    "",
                    "        //                                     //get back",
                    "        //                                          mainView.pop();",
                    "",
                    "        //                                 //     // Hide login panel",
                    "        //                                      form.hide();",
                    "",
                    "",
                    "                                        };",
                    "                                     // Failure",
                    "                                        var failureCallback = function(resp, ops) {",
                    "",
                    "                                           var jsonResp = Ext.JSON.decode(resp.responseText);",
                    "                                                      Ext.Msg.alert(\"Info\",\"Not Alert\");",
                    "",
                    "",
                    "",
                    "                                        };",
                    "",
                    "",
                    "",
                    "                                var alertfield = Ext.getCmp('alertfield');",
                    "                                var token = localStorage.getItem('ppmtoken');",
                    "                                if(!alertfield.getReadOnly())",
                    "                                    {",
                    "                                     var message = alertfield.getValue();",
                    "",
                    "",
                    "                                      var callparams = {",
                    "                                                            \"token\":token,",
                    "                                                             \"message\": message",
                    "                                                            };",
                    "                                        //TODO: Registration using server-side authentication service",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "                                                            Ext.Ajax.request({",
                    "                                                                url: \"http://pm-dev.cs.fiu.edu:8080/ppmws/alert\",",
                    "                                                                /*url: \"http://192.168.0.101/sendemail\",*/",
                    "                                                                method: 'POST',",
                    "                                                                /*headers: { 'Content-Type': 'application/json' },*/",
                    "                                                                params: callparams,",
                    "                                                                success: successCallback,",
                    "                                                                failure: failureCallback",
                    "                                                            });",
                    "                                    }"
                ],
                "name": "tap"
            },
            "name": "onButtonTap",
            "designerId": "ab523b1c-9e98-4bcd-a76a-2d40edfe826e"
        }
    ]
}